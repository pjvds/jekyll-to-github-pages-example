box: wercker/ruby
build:
  steps:
    # Install dependencies defined in Gemfile
    - bundle-install

    # Execute jekyll doctor to validate the
    # site against a list of known issues/deprecates.
    - script:
        name: jekyll doctor
        code: bundle exec jekyll doctor

    # Generate the jekyll site with trace information on.
    # And store the result in the $WERCKER_OUTPUT_DIR, the
    # directory that is shared with the deployment pipeline.
    - script:
        name: jekyll build
        code: bundle exec jekyll build --trace --destination $WERCKER_OUTPUT_DIR
deploy :
  steps :
    - script:
        name: Configure git
        code: |-
          git config --global user.email "pleasemailus@wercker.com"
          git config --global user.name "wercker"
    - script:
        name: Deploy to github pages
        code: |-
          git init
          git add .
          git commit -m "deploy commit from $WERCKER_STARTED_BY"
          git push -f $GIT_REMOTE master:gh-pages